version: "3"

includes:
  remote: "../exports/taskfiles/utils/remote.yaml"

set: ["u", "pipefail"]
shopt: ["globstar"]

tasks:
  default:
    cmds:
      - task: "download-and-extract-zip-basic"

  download-and-extract-zip-test-basic:
    vars:
      OUTPUT_DIR: "{{.G_OUTPUT_DIR}}/{{.TASK}}"
    cmds:
      - task: "remote:download-and-extract-zip"
        vars:
          OUTPUT_DIR: "{{.OUTPUT_DIR}}"
          URL: "https://github.com/y-scope/yscope-dev-utils/archive/refs/heads/main.zip"
          FILE_SHA256: "2c9a21f83484e004c41c28be759451dbdc787190eb044365ba58f7bb846418f6"
      - "diff -q '{{.OUTPUT_DIR}}/yscope-dev-utils-main/LICENSE' '{{.ROOT_DIR}}/LICENSE'"
      - "test -e '{{.OUTPUT_DIR}}.md5'"
      - "test -e '{{.OUTPUT_DIR}}.zip'"
